#! /bin/bash

sudo touch /home/core/.profile
source /home/core/.profile
/home/core/docker/shell/mount_data

sudo systemctl start etcd
sudo systemctl start fleet

hour=`date "+%H"`
minute=`date "+%M"`
let minute=hour*60+minute

while [ 1 ]
do
    let minute+=1
    let oneMinute=minute%1
    let tenMinute=minute%10
    let halfHour=minute%30
    let oneHour=minute%60
    let oneDay=minute%1440
    let twoDay=minute%2880

    if [ $oneMinute = 0 ]
    then
        /home/core/data/autorun/autorun_one_minute
    fi

    if [ $tenMinute = 0 ]
    then
        /home/core/docker/shell/autorun_git
        /home/core/docker/shell/autorun_ssh
    fi

    if [ $halfHour = 0 ]
    then
        /home/core/data/autorun/autorun_half_hour
    fi

    if [ $oneHour = 0 ]
    then
       /home/core/data/autorun/autorun_one_hour
    fi

    if [ $oneDay = 0 ]
    then
       /home/core/data/autorun/autorun_one_day
       /home/core/docker/shell/autorun_docker
    fi

    if [ $twoDay = 0 ]
    then
       /home/core/data/autorun/autorun_two_day
    fi

    sleep 60s

done
